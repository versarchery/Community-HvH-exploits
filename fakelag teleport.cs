public Action teleport(int client, int args){
    if(!g_cvEnabled.BoolValue) return Plugin_Handled;
    if (args < 1){
        return Plugin_Handled;
    }
    char sAmount[32];
    GetCmdArg(1, sAmount, sizeof(sAmount));
    ApplyTeleport(client, StringToFloat(sAmount));
    return Plugin_Handled;
}

void ApplyTeleport(int client, float amount){
    float fEyeAngles[3], fDirection[3], tTP[3];
    GetClientAbsOrigin(client, tTP);
    tTP[2] += float(g_cvUpAmount.IntValue);
    GetClientEyeAngles(client, fEyeAngles);
    GetAngleVectors(fEyeAngles, fDirection, NULL_VECTOR, NULL_VECTOR);  
    ScaleVector(fDirection, amount);
    TeleportEntity(client, tTP, NULL_VECTOR, NULL_VECTOR);
    TeleportEntity(client, NULL_VECTOR, NULL_VECTOR, fDirection);
}